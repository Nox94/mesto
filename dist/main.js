(()=>{const e=document.querySelector(".popup-profile"),t=document.querySelector(".popup-cards"),n=document.querySelector(".popup-image"),o=document.querySelectorAll(".popup__close"),r=document.querySelector("#popupProfileSave"),c=document.querySelector("#popupCardElemSave"),u=document.querySelector(".popup__form-row_type_name"),l=document.querySelector(".popup__form-row_type_about"),a=document.querySelector(".popup__form-row_type_heading"),i=document.querySelector(".popup__form-row_type_link"),p=document.querySelector(".profile__heading"),d=document.querySelector(".profile__subheading"),s=document.querySelector(".profile__button-edit"),m=document.querySelector(".profile__button-add"),_=document.querySelector(".elements"),y=document.querySelector(".popup__picture"),g=document.querySelector(".popup__capture"),v=document.querySelector("#card-template").content;function f(e,t,n){const o=n.cloneNode(!0),r=o.querySelector(".elements__card-img"),c=o.querySelector(".elements__card-heading"),u=o.querySelector(".elements__remove-button"),l=o.querySelector(".elements__like-button");return c.textContent=e,r.src=t,r.alt=e,l.addEventListener("click",S),u.addEventListener("click",q),r.addEventListener("click",E),o}function k(e,t){e.prepend(t)}function S(e){e.target.classList.toggle("elements__like-button_clicked")}function q(e){e.target.closest(".elements__card").remove()}function E(e){y.src=e.target.src,y.alt=e.target.alt;const t=e.target.closest(".elements__card");g.textContent=t.querySelector(".elements__card-heading").textContent,b(n)}function L(e){e.target===e.currentTarget&&x(e.currentTarget)}function h(e){"Escape"===e.key&&x(e.currentTarget.querySelector(".popup_opened"))}function b(e){document.addEventListener("keydown",h),e.addEventListener("click",L),e.classList.add("popup_opened")}function C(e){x(e.target.closest(".popup"))}function x(e){document.removeEventListener("keydown",h),e.removeEventListener("click",L),e.classList.remove("popup_opened")}[{name:"Архыз",link:"./images/arkhyz.jpg"},{name:"Эльбрус",link:"./images/elbrus.jpg"},{name:"Карачаевск",link:"./images/karachaevsk.jpg"},{name:"Пятигорск",link:"./images/pyatigorsk.jpg"},{name:"Сочи",link:"./images/sochi.jpg"},{name:"Архыз",link:"./images/arkhyz.jpg"}].forEach((function(e){const t=e.name,n=e.link;k(_,f(t,n,v))})),o.forEach((e=>e.addEventListener("click",C))),s.addEventListener("click",(()=>{u.value=p.textContent,l.value=d.textContent,b(e)})),m.addEventListener("click",(()=>{setButtonState(c.elements.submit,c.checkValidity(),validationConfig),b(t)})),r.addEventListener("submit",(function(t){t.preventDefault(),p.textContent=u.value,d.textContent=l.value,x(e)})),c.addEventListener("submit",(function(e){e.preventDefault(),k(_,f(a.value,i.value,v)),x(t),c.reset()}))})();